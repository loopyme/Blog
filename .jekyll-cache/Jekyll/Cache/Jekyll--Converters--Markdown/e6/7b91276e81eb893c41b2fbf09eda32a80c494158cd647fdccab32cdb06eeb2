I"§I<h3 id="1-æŒ‰åˆ—å¤„ç†">1. æŒ‰åˆ—å¤„ç†&amp;</h3>

<p>è¿™æ˜¯æˆ‘é¡ºç€ç›´è§‰å†™å‡ºæ¥çš„ä»£ç ,æœç„¶åˆé•¿åˆè‡­,å»ºè®®ä¸è¦çœ‹</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
      <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">numRows</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">numRows</span> <span class="o">==</span><span class="mi">1</span><span class="p">:</span>
          <span class="k">return</span> <span class="n">s</span>
        <span class="n">s</span> <span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">flag</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">location</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)):</span>
          <span class="n">location</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">counter</span>
          <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
            <span class="n">counter</span><span class="o">+=</span><span class="mi">1</span>
          <span class="k">else</span><span class="p">:</span>
            <span class="n">counter</span><span class="o">-=</span><span class="mi">1</span>
          <span class="k">if</span> <span class="n">counter</span><span class="o">&gt;=</span><span class="n">numRows</span><span class="p">:</span>
            <span class="n">counter</span> <span class="o">=</span> <span class="n">numRows</span><span class="o">-</span><span class="mi">2</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="bp">False</span>
          <span class="k">elif</span> <span class="n">counter</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">counter</span><span class="o">=</span><span class="mi">1</span>
            <span class="n">flag</span> <span class="o">=</span><span class="bp">True</span>

        <span class="n">area</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numRows</span><span class="p">)]</span>
        <span class="nb">str</span><span class="o">=</span><span class="s">""</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)):</span>
          <span class="n">area</span><span class="p">[</span><span class="n">location</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numRows</span><span class="p">):</span>
          <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">area</span><span class="p">[</span><span class="n">i</span><span class="p">])):</span>
            <span class="nb">str</span><span class="o">+=</span><span class="n">area</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">str</span>
</code></pre></div></div>
<blockquote>
  <p>æ‰§è¡Œç”¨æ—¶: 196 ms, åœ¨ZigZag Conversionçš„Python3æäº¤ä¸­å‡»è´¥äº†16.91% çš„ç”¨æˆ·</p>

  <p>å†…å­˜æ¶ˆè€—: 13.2 MB, åœ¨ZigZag Conversionçš„Python3æäº¤ä¸­å‡»è´¥äº†8.23% çš„ç”¨æˆ·</p>
</blockquote>

<hr />
<h3 id="2ä¼˜åŒ–æ–¹æ³•1">2.ä¼˜åŒ–æ–¹æ³•1</h3>

<p>æˆ‘ä¸€è´¯çš„ä½œé£,æŠŠæ ‡å‡†ç­”æ¡ˆä¸Šçš„c++ä»£ç ,é‡å†™äº†ä¸€è¾¹,å…¶å®å°±æ˜¯å¯¹æ–¹æ³•1çš„ä¼˜åŒ–</p>

<ul>
  <li>å»é™¤æ„å»ºloctionåˆ—è¡¨çš„ä¸­é—´ç¯èŠ‚,æ‰¾åˆ°ä½ç½®ä»¥åç›´æ¥è¿æ¥åˆ°å¯¹åº”è¡Œ</li>
  <li>æŠŠå­˜å‚¨è¡Œå†…å®¹çš„åˆ—è¡¨æ”¹ä¸ºå­—ç¬¦ä¸²,å°±å¯å‡å°‘æœ€åçš„åˆ—è¡¨å­—ç¬¦è¿æ¥ç¯èŠ‚</li>
</ul>

<p>æˆ‘å†™å®Œå†³å®šå†ä¹Ÿä¸åœ¨è„‘å­ä¸æ¸…é†’çš„æ—¶å€™åˆ·LeetCodeäº†,å‰é¢æ˜¯å†™çš„å•¥ç©æ„å„¿,å®Œå…¨æ˜¯<strong>å¼Ÿå¼Ÿè¡Œä¸º</strong>.</p>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
  <span class="nl">public:</span>
      <span class="n">string</span> <span class="n">convert</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">,</span> <span class="kt">int</span> <span class="n">numRows</span><span class="p">)</span> <span class="p">{</span>

          <span class="k">if</span> <span class="p">(</span><span class="n">numRows</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">s</span><span class="p">;</span>

          <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">rows</span><span class="p">(</span><span class="n">min</span><span class="p">(</span><span class="n">numRows</span><span class="p">,</span> <span class="kt">int</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">())));</span>
          <span class="kt">int</span> <span class="n">curRow</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="kt">bool</span> <span class="n">goingDown</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

          <span class="k">for</span> <span class="p">(</span><span class="kt">char</span> <span class="n">c</span> <span class="o">:</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
              <span class="n">rows</span><span class="p">[</span><span class="n">curRow</span><span class="p">]</span> <span class="o">+=</span> <span class="n">c</span><span class="p">;</span>
              <span class="k">if</span> <span class="p">(</span><span class="n">curRow</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">curRow</span> <span class="o">==</span> <span class="n">numRows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="n">goingDown</span> <span class="o">=</span> <span class="o">!</span><span class="n">goingDown</span><span class="p">;</span>
              <span class="n">curRow</span> <span class="o">+=</span> <span class="n">goingDown</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="n">string</span> <span class="n">ret</span><span class="p">;</span>
          <span class="k">for</span> <span class="p">(</span><span class="n">string</span> <span class="n">row</span> <span class="o">:</span> <span class="n">rows</span><span class="p">)</span> <span class="n">ret</span> <span class="o">+=</span> <span class="n">row</span><span class="p">;</span>
          <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
      <span class="p">}</span>
  <span class="p">};</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
      <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">numRows</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">numRows</span> <span class="o">==</span><span class="mi">1</span><span class="p">:</span> <span class="k">return</span> <span class="n">s</span>

        <span class="n">cur_row</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">going_down</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="s">""</span><span class="p">]</span><span class="o">*</span><span class="nb">min</span><span class="p">(</span><span class="n">numRows</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
          <span class="n">rows</span><span class="p">[</span><span class="n">cur_row</span><span class="p">]</span><span class="o">+=</span><span class="n">i</span>
          <span class="k">if</span> <span class="n">cur_row</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">cur_row</span> <span class="o">==</span> <span class="n">numRows</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">going_down</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span>
          <span class="n">cur_row</span> <span class="o">+=</span><span class="n">going_down</span>

        <span class="n">result</span> <span class="o">=</span><span class="s">""</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
          <span class="n">result</span><span class="o">+=</span><span class="n">i</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div></div>
<blockquote>
  <p>æ‰§è¡Œç”¨æ—¶: 128 ms, åœ¨ZigZag Conversionçš„Python3æäº¤ä¸­å‡»è´¥äº†60.64% çš„ç”¨æˆ·</p>

  <p>å†…å­˜æ¶ˆè€—: 13.1 MB, åœ¨ZigZag Conversionçš„Python3æäº¤ä¸­å‡»è´¥äº†8.23% çš„ç”¨æˆ·</p>
</blockquote>

<hr />
<h3 id="3-æŒ‰è¡Œå¤„ç†">3. æŒ‰è¡Œå¤„ç†</h3>

<p>é€šè¿‡æ‰¾ç»“æœä¸­æ¯è¡Œçš„å­—ç¬¦åœ¨åŸå­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•,å¯ä»¥æ‰¾åˆ°é€šé¡¹å…¬å¼,ç„¶åå°±èƒ½å¾ˆæ–¹ä¾¿çš„æŒ‰è¡Œå¤„ç†äº†</p>

<p>ä¼˜åŠ¿åœ¨äºå¯ä»¥ä¸ç”¨ä½¿ç”¨é¢å¤–çš„åˆ—è¡¨æ¥å­˜å‚¨æ•°æ®äº†</p>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<p>ä»¤n=numRows-1, mä¸º(0,n)çš„ä¸€ä¸ªæ•´æ•°,å¼€å§‹åˆ†æé€šé¡¹å…¬å¼:</p>
<ul>
  <li>ç¬¬0è¡Œ: $2 \times i \times n $</li>
  <li>ç¬¬mè¡Œ: $\left\lfloor\frac {i+1}2 \right\rfloor \times 2 \times n + (-1)^{i+1} \times m$</li>
  <li>ç¬¬nè¡Œ: $2 \times i \times n + n$</li>
</ul>

<p>(ps: å¯èƒ½ä¼šæ— æ³•åŠ è½½ä¸Šé¢çš„å…¬å¼,è¯•äº†<a href="https://stackoverflow.com/questions/26275645/how-to-support-latex-in-github-pages">stackoverflow</a>ä¸Šæ‰€æœ‰æ–¹æ³•,æµè§ˆå™¨è¿˜æ˜¯åŠ è½½ä¸äº†MathJax.js,æœ›å¤§ç¥èµæ•™)</p>

<p>æœ€å¤šæ˜¾ç¤ºæˆè¿™æ ·:(è¿åœ¨ä¸€èµ·çš„åœ°æ–¹å°±æ˜¯å·®ä¸ªåŠ å·â€¦.)</p>
<ul>
  <li>ç¬¬0è¡Œ: <img src="https://www.zhihu.com/equation?tex=2 \times i \times n" /></li>
  <li>ç¬¬mè¡Œ: <img src="https://www.zhihu.com/equation?tex=\left\lfloor\frac {i+1}2 \right\rfloor \times 2 \times n + (-1)^{i+1} \times m" /></li>
  <li>ç¬¬nè¡Œ: <img src="https://www.zhihu.com/equation?tex=2 \times i \times n + n" /></li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- ç¬¬0è¡Œ: <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"https://www.zhihu.com/equation?tex=2 \times i \times n"</span> <span class="nt">/&gt;</span>
- ç¬¬mè¡Œ: <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"https://www.zhihu.com/equation?tex=\left\lfloor\frac {i+1}2 \right\rfloor \times 2 \times n + (-1)^{i+1} \times m"</span> <span class="nt">/&gt;</span>
- ç¬¬nè¡Œ: <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"https://www.zhihu.com/equation?tex=2 \times i \times n + n"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>
<p>è¿™å¯çœŸæ˜¯ä¸ªå°æœºçµé¬¼æƒ³å‡ºæ¥çš„åŠæ³•</p>

<p>ä»£ç ç»“æœä»ç„¶ä¸ç†æƒ³,è™½ç„¶ä¸ç”¨ä½¿ç”¨é¢å¤–çš„åˆ—è¡¨,ä½†åœ¨ç”Ÿæˆç»“æœå­—ç¬¦ä¸²æ—¶,è¿˜æ˜¯å ç”¨äº†æ¯”è¾ƒå¤§çš„ç©ºé—´</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">numRows</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">numRows</span> <span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">numRows</span> <span class="o">&gt;</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">):</span> <span class="k">return</span> <span class="n">s</span>

      <span class="n">result</span> <span class="o">=</span> <span class="s">""</span>
      <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="c1"># row0
</span>      <span class="n">n</span> <span class="o">=</span> <span class="n">numRows</span><span class="o">-</span><span class="mi">1</span>
      <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">i</span><span class="o">*</span><span class="n">n</span><span class="p">:</span>
        <span class="n">result</span><span class="o">+=</span><span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">i</span><span class="o">*</span><span class="n">n</span><span class="p">]</span>
        <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>
      <span class="c1"># rowM
</span>      <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="o">+</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">**</span> <span class="n">i</span><span class="p">)</span><span class="o">*</span><span class="n">m</span><span class="p">:</span>
          <span class="n">result</span><span class="o">+=</span><span class="n">s</span><span class="p">[(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="o">+</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">**</span> <span class="n">i</span> <span class="p">)</span><span class="o">*</span><span class="n">m</span><span class="p">]</span>
          <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>
      <span class="c1"># rowN
</span>      <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">n</span><span class="p">:</span>
        <span class="n">result</span><span class="o">+=</span><span class="n">s</span><span class="p">[(</span><span class="mi">2</span><span class="o">*</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">n</span><span class="p">]</span>
        <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>
      <span class="k">return</span> <span class="n">result</span>
</code></pre></div></div>
<blockquote>
  <p>æ‰§è¡Œç”¨æ—¶: 172 ms, åœ¨ZigZag Conversionçš„Python3æäº¤ä¸­å‡»è´¥äº†24.85% çš„ç”¨æˆ·</p>

  <p>å†…å­˜æ¶ˆè€—: 13.2 MB, åœ¨ZigZag Conversionçš„Python3æäº¤ä¸­å‡»è´¥äº†8.23% çš„ç”¨æˆ·</p>
</blockquote>
:ET